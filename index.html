<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Wrap | Instant P2P Chat</title>
    <link rel="stylesheet" href="main.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Intro Page Section -->
    <div id="intro-page" class="active">
        <div class="particle-container" id="particles"></div>
        <div class="intro-content">
            <h1 class="glow-text">Quick Wrap</h1>
            <p class="subtitle">Instant, Private, Peer-to-Peer Chat</p>
            <p class="description">Generate a code. Connect with friends. No servers, just you and them.</p>
            <button id="enter-chat-btn" class="pulse-btn">Tap to Enter Chat</button>
        </div>
        <footer class="intro-footer">
            <span>Powered by xAI</span>
            <div class="footer-links">
                <a href="#about">About</a>
                <a href="#support">Support</a>
            </div>
        </footer>
    </div>

    <!-- Payment Modal (appears for new users) -->
    <div id="payment-modal" class="modal">
        <div class="modal-content">
            <h2>Unlock Quick Wrap Premium</h2>
            <div class="price-container">
                <span class="price">$1</span>
                <span class="price-description">one-time payment</span>
            </div>
            <div class="payment-options">
                <button id="stripe-payment" class="payment-btn">Pay with Card</button>
                <button id="crypto-payment" class="payment-btn">Pay with Crypto</button>
            </div>
            <div id="payment-details" class="hidden">
                <!-- Placeholder for Stripe form or crypto QR -->
            </div>
            <button id="continue-free" class="text-btn">Continue with Free Version</button>
        </div>
    </div>

    <!-- Main Chat Section -->
    <div id="chat-page" class="hidden">
        <div class="sidebar">
            <div class="logo-container">
                <h2 class="logo">QW</h2>
            </div>
            <div class="code-actions">
                <button id="generate-code-btn" class="action-btn">Generate Code</button>
                <button id="join-code-btn" class="action-btn">Join with Code</button>
            </div>
            <div class="chat-list-container">
                <h3>Active Chats</h3>
                <ul id="chat-list"></ul>
            </div>
            <div class="user-settings">
                <button id="settings-btn" class="icon-btn">⚙️</button>
                <div id="premium-badge" class="hidden">PRO</div>
            </div>
        </div>

        <div class="main-chat">
            <div id="empty-state" class="empty-state">
                <h2>No active chat</h2>
                <p>Generate a code to share with friends or join with a code</p>
            </div>
            
            <div id="active-chat" class="hidden">
                <div class="chat-header">
                    <h3 id="chat-code">Code: <span></span></h3>
                    <div class="chat-actions">
                        <button id="copy-code-btn" class="icon-btn">📋</button>
                        <button id="close-chat-btn" class="icon-btn">✖️</button>
                    </div>
                </div>
                
                <div id="messages-container" class="messages-container">
                    <!-- Messages will be added here dynamically -->
                </div>
                
                <div class="message-input">
                    <input type="text" id="message-input" placeholder="Type your message...">
                    <button id="send-btn">Send</button>
                </div>
            </div>
        </div>
        
        <div class="premium-panel">
            <h3>Premium Features</h3>
            <div id="premium-features" class="features-list">
                <div class="feature locked">
                    <span>Custom Themes</span>
                    <span class="lock-icon">🔒</span>
                </div>
                <div class="feature locked">
                    <span>Voice Messages</span>
                    <span class="lock-icon">🔒</span>
                </div>
                <div class="feature locked">
                    <span>File Sharing</span>
                    <span class="lock-icon">🔒</span>
                </div>
                <div class="feature locked">
                    <span>Group Chats</span>
                    <span class="lock-icon">🔒</span>
                </div>
                <div class="feature locked">
                    <span>Disappearing Messages</span>
                    <span class="lock-icon">🔒</span>
                </div>
            </div>
            <button id="upgrade-btn" class="upgrade-btn hidden">Upgrade Now</button>
        </div>
    </div>

    <!-- Code Join Modal -->
    <div id="code-modal" class="modal hidden">
        <div class="modal-content">
            <h2 id="modal-title">Join with Code</h2>
            <div id="code-display" class="code-display hidden">
                <h3>Your code is:</h3>
                <div id="generated-code" class="generated-code"></div>
                <p>Share this code with a friend to connect</p>
                <button id="copy-generated-code" class="action-btn">Copy Code</button>
            </div>
            <div id="code-input-container">
                <input type="text" id="code-input" maxlength="6" placeholder="Enter 6-digit code">
                <button id="submit-code-btn" class="action-btn">Connect</button>
            </div>
            <button id="close-modal-btn" class="text-btn">Cancel</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <script src="main.js"></script>
    <script src="webrtc.js"></script>
    <script src="payment.js"></script>
    <script src="ip-recognition.js"></script>
    <script src="ui-effects.js"></script>
</body>
</html>
